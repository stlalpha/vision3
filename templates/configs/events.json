{
  "_comment": "Event Scheduler Configuration - IMPORTANT: Update command paths and arguments for your system. {BBS_ROOT} will be replaced with the BBS installation directory at runtime.",
  "enabled": false,
  "max_concurrent_events": 3,
  "events": [
    {
      "id": "example_every_minute",
      "name": "Example: Every Minute",
      "schedule": "* * * * *",
      "comment": "Runs every minute. Cron format: minute hour day month weekday",
      "command": "/bin/date",
      "args": ["+Event executed at %Y-%m-%d %H:%M:%S"],
      "working_directory": "/tmp",
      "timeout_seconds": 60,
      "enabled": false
    },
    {
      "id": "example_hourly",
      "name": "Example: Hourly Task",
      "schedule": "@hourly",
      "comment": "Special schedule: @hourly, @daily, @weekly, @monthly, @yearly",
      "command": "/bin/echo",
      "args": ["Hourly task executed at {DATETIME}"],
      "working_directory": "/tmp",
      "timeout_seconds": 60,
      "enabled": false
    },
    {
      "id": "example_daily_maintenance",
      "name": "Example: Daily Maintenance at 3am",
      "schedule": "0 3 * * *",
      "comment": "Runs at 3:00 AM every day. Format: 0 3 * * * (minute=0, hour=3)",
      "command": "/bin/echo",
      "args": ["Daily maintenance running"],
      "working_directory": "/tmp",
      "timeout_seconds": 3600,
      "enabled": false
    },
    {
      "id": "example_binkd_poll_simple",
      "name": "Example: Simple Binkd Poll",
      "schedule": "*/15 * * * *",
      "comment": "Simple binkd poll every 15 minutes (polls all configured nodes). Adjust paths for your system.",
      "command": "/usr/local/bin/binkd",
      "args": ["-p"],
      "working_directory": "{BBS_ROOT}",
      "timeout_seconds": 300,
      "enabled": false
    },
    {
      "id": "example_binkd_poll_specific",
      "name": "Example: Binkd Poll Specific Node",
      "schedule": "*/30 * * * *",
      "comment": "Poll a specific node every 30 minutes. Update command path, node address, and config path for your setup.",
      "command": "/usr/local/bin/binkd",
      "args": [
        "-P",
        "21:4/100@fsxnet",
        "{BBS_ROOT}/data/ftn/binkd.conf"
      ],
      "working_directory": "{BBS_ROOT}",
      "timeout_seconds": 300,
      "enabled": false
    },
    {
      "id": "example_hpt_toss",
      "name": "Example: HPT Toss Echomail",
      "schedule": "@hourly",
      "comment": "Toss echomail using HPT. Update command and config paths for your system.",
      "command": "/usr/local/bin/hpt",
      "args": [
        "toss",
        "-c",
        "{BBS_ROOT}/data/ftn/husky.cfg"
      ],
      "working_directory": "{BBS_ROOT}",
      "timeout_seconds": 600,
      "enabled": false
    },
    {
      "id": "example_hpt_scan_pack",
      "name": "Example: HPT Scan and Pack",
      "schedule": "0 */2 * * *",
      "comment": "Scan and pack echomail every 2 hours. Uses high water marks to only export new messages. Update command and config paths.",
      "command": "/usr/local/bin/hpt",
      "args": [
        "-c",
        "{BBS_ROOT}/data/ftn/husky.cfg",
        "scan",
        "pack"
      ],
      "working_directory": "{BBS_ROOT}",
      "timeout_seconds": 900,
      "enabled": false
    },
    {
      "id": "example_with_placeholders",
      "name": "Example: Using Placeholders",
      "schedule": "0 * * * *",
      "comment": "Demonstrates placeholder usage: {TIMESTAMP}, {EVENT_ID}, {EVENT_NAME}, {BBS_ROOT}, {DATE}, {TIME}, {DATETIME}",
      "command": "/bin/echo",
      "args": [
        "Event {EVENT_ID} ({EVENT_NAME}) ran at {DATETIME} - Unix timestamp: {TIMESTAMP}"
      ],
      "working_directory": "/tmp",
      "timeout_seconds": 30,
      "enabled": false
    },
    {
      "id": "example_backup_with_placeholders",
      "name": "Example: Backup with Date Placeholders",
      "schedule": "0 2 * * *",
      "comment": "Daily backup at 2 AM using placeholders for dated filenames",
      "command": "/usr/bin/tar",
      "args": [
        "-czf",
        "/backups/bbs-{DATE}.tar.gz",
        "{BBS_ROOT}/data",
        "--exclude=*.log"
      ],
      "working_directory": "{BBS_ROOT}",
      "timeout_seconds": 7200,
      "enabled": false
    },
    {
      "id": "example_shell_script",
      "name": "Example: Run Shell Script with Multiple Commands",
      "schedule": "0 4 * * *",
      "comment": "Run a complex shell script at 4 AM using /bin/sh -c",
      "command": "/bin/sh",
      "args": [
        "-c",
        "cd {BBS_ROOT} && ./cleanup.sh && ./optimize.sh && echo 'Maintenance complete at {DATETIME}' >> logs/maintenance.log"
      ],
      "working_directory": "{BBS_ROOT}",
      "timeout_seconds": 1800,
      "enabled": false
    },
    {
      "id": "example_purge_deleted_users",
      "name": "Example: Nightly Deleted User Purge",
      "schedule": "0 3 * * *",
      "comment": "Permanently remove soft-deleted user accounts that have exceeded deletedUserRetentionDays (set in config.json, default 30 days). Runs at 3:00 AM. Safe to run daily — accounts not yet past the retention period are left untouched.",
      "command": "{BBS_ROOT}/helper",
      "args": ["users", "purge"],
      "working_directory": "{BBS_ROOT}",
      "timeout_seconds": 60,
      "enabled": false
    },
    {
      "id": "example_nightly_msgbase_fix",
      "name": "Example: Nightly Message Base Integrity Check",
      "schedule": "0 2 * * *",
      "comment": "Check and repair JAM message base integrity across all areas at 2 AM. Part of a 3-step nightly maintenance sequence: fix → purge → pack.",
      "command": "/usr/bin/go",
      "args": [
        "run",
        "{BBS_ROOT}/cmd/jamutil",
        "fix",
        "--repair",
        "--all"
      ],
      "working_directory": "{BBS_ROOT}",
      "timeout_seconds": 3600,
      "enabled": false
    },
    {
      "id": "example_nightly_msgbase_purge",
      "name": "Example: Nightly Message Base Purge",
      "schedule": "15 2 * * *",
      "comment": "Purge messages exceeding per-area age/count limits (max_msg_age, max_msgs) configured in message_areas.json. Runs at 2:15 AM between fix and pack. No flags needed — limits are read from config.",
      "command": "/usr/bin/go",
      "args": [
        "run",
        "{BBS_ROOT}/cmd/jamutil",
        "purge",
        "--all"
      ],
      "working_directory": "{BBS_ROOT}",
      "timeout_seconds": 3600,
      "enabled": false
    },
    {
      "id": "example_nightly_msgbase_pack",
      "name": "Example: Nightly Message Base Pack",
      "schedule": "30 2 * * *",
      "comment": "Defragment and compact all JAM message bases at 2:30 AM, reclaiming space from purged/deleted messages. Runs last in the nightly sequence.",
      "command": "/usr/bin/go",
      "args": [
        "run",
        "{BBS_ROOT}/cmd/jamutil",
        "pack",
        "--all"
      ],
      "working_directory": "{BBS_ROOT}",
      "timeout_seconds": 3600,
      "enabled": false
    }
  ]
}
